<style>
  p{margin:0;}
</style>
<p>encryption</p>
<br>
<p>content :</p>
<input type="text" id="content"/>
<br>
<br>
<p>key :</p>
<input type="text" id="key"/>
<br>
<br>
<button id="encrypt">encrypt</button>
<button id="decrypt">decrypt</button>
<br>
<br>
<p id="result">result here</p>

<script>
  window.onload = function () {
    function encrypt (content, key) {
      const data = ["", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", " "];
      const datalength = data.length - 1;
      let length = content.length;
      let keylength = key.length;
      let keynow = 0;
      let result = "";
      let newkey = key;
      for (let i=1;i<keylength;i++) {
        newkey += key.substring(i,keylength);
        newkey += key.substring(0,i);
      }
      key = newkey;
      keylength = key.length;
      for (let i=0;i<length;i++) {
        let sub = content.substr(i,1);
        let keysub = key.substr(keynow,1);
        let index = data.indexOf(sub);
        let keyindex = data.indexOf(keysub);
        let newindex = index - keyindex;
        if (newindex < 1) newindex += datalength;
        result += data[newindex];
        keynow++;
        keynow %= keylength;
      }
      return result;
    }

    function decrypt (content, key) {
      const data = ["", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "1", "0", "2", "3", "4", "5", "6", "7", "8", "9", " "];
      const datalength = data.length - 1;
      let length = content.length;
      let keylength = key.length;
      let keynow = 0;
      let result = "";
      let newkey = key;
      for (let i=1;i<keylength;i++) {
        newkey += key.substring(i,keylength);
        newkey += key.substring(0,i);
      }
      key = newkey;
      keylength = key.length;
      for (let i=0;i<length;i++) {
        let sub = content.substr(i,1);
        let keysub = key.substr(keynow,1);
        let index = data.indexOf(sub);
        let keyindex = data.indexOf(keysub);
        let newindex = index + keyindex;
        if (newindex > datalength) newindex %= datalength;
        result += data[newindex];
        keynow++;
        keynow %= keylength;
      }
      return result;
    }

    
    function id (idx) {return document.getElementById(idx)}
    
    id("encrypt").onclick = function () {
      let content = id('content').value
      let key = id('key').value
      id('result').innerHTML = encrypt(content,key)
    }
    id("decrypt").onclick = function () {
      let content = id('content').value
      let key = id('key').value
      id('result').innerHTML = decrypt(content,key)
    }
    
  }  
</script>
